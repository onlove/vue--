<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<script src="./json.js"></script>
<script>
    window.onload = function () {

        var mapping = {
            supplierMapping: {
                "Bestwestern": [
                    {
                        title: 'Agoda <- Bestwester'
                    },
                    {
                        title: 'Bookingcom <- Bestwestern'
                    },
                    {
                        title: 'Ctrip <- Bestwestern'
                    }
                ],
                "CARLSON": [
                    {
                        title: 'Agoda <- CARLSON'
                    },
                    {
                        title: 'Bookingcom <- CARLSON'
                    },
                    {
                        title: 'Ctrip <- CARLSON'
                    }
                ]
            },
            channelMapping: {
                "AGODA": [
                    {
                        title: 'AGODA -> CARLSON'
                    },
                    {
                        title: 'AGODA -> CARLSON'
                    },
                    {
                        title: 'AGODA -> CARLSON'
                    }
                ]
            }
        };


        var list = [
            {
                title: "BESTWESTERN-AGODA-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/bestwestern-agoda/bestwestern-agoda-mapping.xlsx",
                description: "BESTWESTERN-AGODA-MAPPING",
                pubDate: "2017-04-17T02:08:48"
            },
            {
                title: "BESTWESTERN-BOOKINGCOM-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/bestwestern-bookingcom/bestwestern-bookingcom-mapping.xlsx",
                description: "BESTWESTERN-BOOKINGCOM-MAPPING",
                pubDate: "2017-04-17T02:09:48"
            },
            {
                title: "BESTWESTERN-CTRIP-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/bestwestern-ctrip/bestwestern-ctrip-mapping.xlsx",
                description: "BESTWESTERN-CTRIP-MAPPING",
                pubDate: "2017-04-17T02:21:58"
            }, {
                title: "CARLSON-AGODA-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/carlson-agoda/carlson-agoda-mapping.xlsx",
                description: "CARLSON-AGODA-MAPPING",
                pubDate: "2017-04-17T02:03:37"
            },
            {
                title: "CARLSON-BOOKINGCOM-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/carlson-bookingcom/carlson-bookingcom-mapping.xlsx",
                description: "CARLSON-BOOKINGCOM-MAPPING",
                pubDate: "2017-04-17T04:05:29"
            },
            {
                title: "CHOICE-AGODA-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/choice-agoda/choice-agoda-mapping.xlsx",
                description: "CHOICE-AGODA-MAPPING",
                pubDate: "2017-04-17T04:31:52"
            },
            {
                title: "HILTON-AGODA-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/hilton-agoda/hilton-agoda-mapping.xlsx",
                description: "HILTON-AGODA-MAPPING",
                pubDate: "2017-04-17T04:12:31"
            },
            {
                title: "HILTON-BOOKINGCOM-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/hilton-bookingcom/hilton-bookingcom-mapping.xlsx",
                description: "HILTON-BOOKINGCOM-MAPPING",
                pubDate: "2017-04-17T04:20:48"
            },
            {
                title: "HILTON-RAKUTEN-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/hilton-rakuten/hilton-rakuten-mapping.xlsx",
                description: "HILTON-RAKUTEN-MAPPING",
                pubDate: "2017-04-17T04:08:37"
            },
            {
                title: "HILTON-TGS-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/hilton-tgs/hilton-tgs-mapping.xlsx",
                description: "HILTON-TGS-MAPPING",
                pubDate: "2017-04-17T06:21:02"
            },
            {
                title: "HOMEINN-BOOKINGCOM-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/homeinn-bookingcom/homeinn-bookingcom-mapping.xlsx",
                description: "HOMEINN-BOOKINGCOM-MAPPING",
                pubDate: "2017-04-17T06:06:43"
            },
            {
                title: "HYATT-AGODA-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/hyatt-agoda/hyatt-agoda-mapping.xlsx",
                description: "HYATT-AGODA-MAPPING",
                pubDate: "2017-04-17T02:02:33"
            },
            {
                title: "HYATT-BOOKINGCOM-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/hyatt-bookingcom/hyatt-bookingcom-mapping.xlsx",
                description: "HYATT-BOOKINGCOM-MAPPING",
                pubDate: "2017-04-16T06:04:27"
            },
            {
                title: "HYATT-TGS-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/hyatt-tgs/hyatt-tgs-mapping.xlsx",
                description: "HYATT-TGS-MAPPING",
                pubDate: "2017-04-16T06:03:54"
            },
            {
                title: "IHG-BOOKINGCOM-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/ihg-bookingcom/ihg-bookingcom-mapping.xlsx",
                description: "IHG-BOOKINGCOM-MAPPING",
                pubDate: "2017-04-17T08:14:19"
            },
            {
                title: "LEISURELINK-AGODA-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/leisurelink-agoda/leisurelink-agoda-mapping.xlsx",
                description: "LEISURELINK-AGODA-MAPPING",
                pubDate: "2016-12-06T08:00:47"
            },
            {
                title: "LEISURELINK-TGS-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/leisurelink-tgs/leisurelink-tgs-mapping.xlsx",
                description: "LEISURELINK-TGS-MAPPING",
                pubDate: "2016-12-06T08:00:29"
            },
            {
                title: "MARRIOTT-TGS-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/marriott-tgs/marriott-tgs-mapping.xlsx",
                description: "MARRIOTT-TGS-MAPPING",
                pubDate: "2017-04-17T08:20:21"
            },
            {
                title: "NTA-TGS-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/nta-tgs/nta-tgs-mapping.xlsx",
                description: "NTA-TGS-MAPPING",
                pubDate: "2017-04-17T10:02:51"
            },
            {
                title: "OMNI-BOOKINGCOM-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/omni-bookingcom/omni-bookingcom-mapping.xlsx",
                description: "OMNI-BOOKINGCOM-MAPPING",
                pubDate: "2017-04-17T10:00:51"
            },
            {
                title: "OMNI-TGS-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/omni-tgs/omni-tgs-mapping.xlsx",
                description: "OMNI-TGS-MAPPING",
                pubDate: "2017-04-17T10:00:50"
            },
            {
                title: "STARWOOD-TGS-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/starwood-tgs/starwood-tgs-mapping.xlsx",
                description: "STARWOOD-TGS-MAPPING",
                pubDate: "2017-04-17T10:04:22"
            },
            {
                title: "SYNXIS-AGODA-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/synxis-agoda/synxis-agoda-mapping.xlsx",
                description: "SYNXIS-AGODA-MAPPING",
                pubDate: "2017-04-16T12:13:05"
            },
            {
                title: "SYNXIS-HIS-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/synxis-his/synxis-his-mapping.xlsx",
                description: "SYNXIS-HIS-MAPPING",
                pubDate: "2017-04-17T10:01:34"
            },
            {
                title: "SYNXIS-TGS-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/synxis-tgs/synxis-tgs-mapping.xlsx",
                description: "SYNXIS-TGS-MAPPING",
                pubDate: "2017-04-16T12:01:40"
            },
            {
                title: "TRUST-AGODA-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/trust-agoda/trust-agoda-mapping.xlsx",
                description: "TRUST-AGODA-MAPPING",
                pubDate: "2017-04-16T12:01:28"
            },
            {
                title: "TRUST-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/trust/trust-mapping.xlsx",
                description: "TRUST-MAPPING",
                pubDate: "2017-04-17T06:01:23"
            },
            {
                title: "VIENNA-AGODA-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/vienna-agoda/vienna-agoda-mapping.xlsx",
                description: "VIENNA-AGODA-MAPPING",
                pubDate: "2017-04-17T04:01:04"
            },
            {
                title: "VIENNA-BOOKINGCOM-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/vienna-bookingcom/vienna-bookingcom-mapping.xlsx",
                description: "VIENNA-BOOKINGCOM-MAPPING",
                pubDate: "2017-04-16T12:01:30"
            },
            {
                title: "WYNDHAM-TGS-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/wyndham-tgs/wyndham-tgs-mapping.xlsx",
                description: "WYNDHAM-TGS-MAPPING",
                pubDate: "2017-04-16T14:28:24"
            },
            {
                title: "WYNDXIS-HIS-MAPPING",
                link: "https://support.derbysoftsec.com/s3gate/resource/report/mapping/wyndxis-his/wyndxis-his-mapping.xlsx",
                description: "WYNDXIS-HIS-MAPPING",
                pubDate: "2017-04-17T10:01:03"
            }
        ];


        var mapping = {
            supplierMapping: [],
            channelMapping: []
        };
        list.forEach(function (value, index) {
            var cur = value.title.replace('-MAPPING', '');
            var titles = cur.split('-');

           collectionMapping('supplierMapping', titles, 0, value, ' <- ');
           collectionMapping('channelMapping', titles, 1, value, ' <- ');
        });
        function collectionMapping(key, titles, index, value, splitWay) {
            if (mapping[key][titles[index]] == null) {
                mapping[key][titles[index]] = [];
            }
            return mapping[key][titles[index]].push({
                link: value.link,
                description: value.description,
                pubDate: value.pubDate,
                title: firstLetterWordCaptial(titles, splitWay)
            });
        }
        function firstLetterWordCaptial(array, splitWay) {
            var firsetLetterWord = [];
            array.forEach(function (value, index) {
                firsetLetterWord.push(value.slice(0, 1) + value.slice(1).toLowerCase())
            });
            return firsetLetterWord.reverse().join(splitWay);
        }
    }
</script>
</body>
</html>